[data-bspk='table'] {
    /*! --template-columns: is set via inline style */

    --white-background: var(--surface-neutral-t1-base);
    --grey-background: var(--surface-neutral-t2-lowest);

    width: 100%;
    border-collapse: separate;
    text-align: left;
    border-spacing: 2rem 0.125rem;
    color: var(--foreground-neutral-on-surface);
    font: var(--labels-base);
    border-radius: var(--radius-md);
    border: 1px solid var(--stroke-neutral-low);
    border-top-left-radius: var(--radius-md);
    border-top-right-radius: var(--radius-md);
    background: var(--white-background);

    table {
        display: grid;
        width: 100%;
        grid-template-columns: var(--template-columns, repeat(auto-fill, minmax(0, 1fr)));
        border-collapse: collapse;

        tr,
        tbody,
        thead {
            display: contents;
        }

        /* [data-size='medium'] */
        --min-height: var(--spacing-sizing-10);
        --padding-y: var(--spacing-sizing-02);

        &[data-size='x-large'] {
            --min-height: var(--spacing-sizing-14);
            --padding-y: var(--spacing-sizing-04);
        }

        &[data-size='large'] {
            --min-height: var(--spacing-sizing-12);
            --padding-y: var(--spacing-sizing-03);
        }

        &[data-size='small'] {
            --min-height: var(--spacing-sizing-08);
            --padding-y: var(--spacing-sizing-01);
        }

        caption,
        td,
        th {
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-height: var(--min-height);
            padding: calc(var(--padding-y) + 2px) var(--spacing-sizing-04);

            &[data-align='right'] {
                align-items: flex-end;
            }

            &[data-align='center'] {
                align-items: center;
            }

            &[data-align='left'] {
                align-items: flex-start;
            }
        }

        caption {
            grid-column: 1 / -1;
            background: var(--grey-background);
            border-bottom: 1px solid var(--stroke-neutral-low);
            display: flex;
            flex-direction: row;
            justify-content: start;
            align-items: center;
            font: var(--labels-small);

            // prevent background bleed
            border-top-left-radius: var(--radius-md);
            border-top-right-radius: var(--radius-md);
        }

        th {
            background: var(--grey-background);
            font: var(--labels-small);
            cursor: pointer;
            border-bottom: 1px solid var(--stroke-neutral-base);
            position: relative;
            z-index: 1;

            &:focus {
                outline: solid 2px var(--stroke-neutral-focus);
                z-index: 2;
            }

            &:hover {
                background:
                    linear-gradient(
                        var(--interactions-neutral-hover-opacity),
                        var(--interactions-neutral-hover-opacity)
                    ),
                    linear-gradient(var(--grey-background), var(--grey-background));
            }
        }

        // target the first row of thead only if caption is not present
        thead:first-child tr:first-child th {
            &:first-child {
                border-top-left-radius: var(--radius-md);
            }

            &:last-child {
                border-top-right-radius: var(--radius-md);
            }
        }

        td {
            font: var(--body-small);

            p {
                margin: 0;
                padding: 0;
                font: var(--body-small);
            }

            &:hover {
                background:
                    linear-gradient(
                        var(--interactions-neutral-hover-opacity),
                        var(--interactions-neutral-hover-opacity)
                    ),
                    linear-gradient(var(--white-background), var(--white-background));
            }
        }

        tr:nth-child(even) td {
            background: var(--grey-background);

            &:hover {
                background:
                    linear-gradient(
                        var(--interactions-neutral-hover-opacity),
                        var(--interactions-neutral-hover-opacity)
                    ),
                    linear-gradient(var(--grey-background), var(--grey-background));
            }
        }

        tr:last-child {
            // prevent background bleed
            td:first-child {
                border-bottom-left-radius: var(--radius-md);
            }

            td:last-child {
                border-bottom-right-radius: var(--radius-md);
            }
        }
    }
}

/** Copyright 2025 Anywhere Real Estate - CC BY 4.0 */
